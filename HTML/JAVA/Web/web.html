<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>

<link href='https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext' rel='stylesheet' type='text/css' /><style type='text/css'>html {overflow-x: initial !important;}:root { --bg-color:#ffffff; --text-color:#333333; --select-text-bg-color:#B5D6FC; --select-text-font-color:auto; --monospace:"Lucida Console",Consolas,"Courier",monospace; --title-bar-height:20px; }
.mac-os-11 { --title-bar-height:28px; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
body { margin: 0px; padding: 0px; height: auto; inset: 0px; font-size: 1rem; line-height: 1.42857; overflow-x: hidden; background: inherit; tab-size: 4; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; overflow-wrap: break-word; position: relative; white-space: normal; overflow-x: visible; padding-top: 36px; }
#write.first-line-indent p { text-indent: 2em; }
#write.first-line-indent li p, #write.first-line-indent p * { text-indent: 0px; }
#write.first-line-indent li { margin-left: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export .footnote-line, .typora-export li, .typora-export p { white-space: pre-wrap; }
.typora-export .task-list-item input { pointer-events: none; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  #write { padding-left: 20px; padding-right: 20px; }
  .CodeMirror-sizer { margin-left: 0px !important; }
  .CodeMirror-gutters { display: none !important; }
}
#write li > figure:last-child { margin-bottom: 0.5rem; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; image-orientation: from-image; }
button, input, select, textarea { color: inherit; font: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p { position: relative; }
p { line-height: inherit; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 4; }
p { orphans: 4; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px; }
tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 32px; }
.CodeMirror-gutters { border-right: 0px; background-color: inherit; }
.CodeMirror-linenumber { user-select: none; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: inherit; position: relative !important; }
.md-fences-adv-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: 0px 0px; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; -webkit-tap-highlight-color: transparent; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li blockquote { margin: 1rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print {
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; font-variant-ligatures: no-common-ligatures; }
  #write { margin-top: 0px; padding-top: 0px; border-color: transparent !important; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  .typora-export #write { break-after: avoid; }
  .typora-export #write::after { height: 0px; }
  .is-mac table { break-inside: avoid; }
  .typora-export-show-outline .typora-export-sidebar { display: none; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p > .md-image:only-child:not(.md-img-error) img, p > img:only-child { display: block; margin: auto; }
#write.first-line-indent p > .md-image:only-child:not(.md-img-error) img { left: -2em; position: relative; }
p > .md-image:only-child { display: inline-block; width: 100%; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
.MathJax_ref { fill: currentcolor; }
[contenteditable="true"]:active, [contenteditable="true"]:focus, [contenteditable="false"]:active, [contenteditable="false"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); border: none; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace); }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.8; font-family: var(--monospace); }
code { text-align: left; vertical-align: initial; }
a.md-print-anchor { white-space: pre !important; border-width: initial !important; border-style: none !important; border-color: initial !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; background: 0px 0px !important; text-decoration: initial !important; text-shadow: initial !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="flow"] svg, [lang="mermaid"] svg { max-width: 100%; height: auto; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom: 0px; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: none; }
.highlight td, .highlight tr { border: 0px; }
mark { background: rgb(255, 255, 0); color: rgb(0, 0, 0); }
.md-html-inline .md-plain, .md-html-inline strong, mark .md-inline-math, mark strong { color: inherit; }
.md-expand mark .md-meta { opacity: 0.3 !important; }
mark .md-meta { color: rgb(0, 0, 0); }
@media print {
  .typora-export h1, .typora-export h2, .typora-export h3, .typora-export h4, .typora-export h5, .typora-export h6 { break-inside: avoid; }
}
.md-diagram-panel .messageText { stroke: none !important; }
.md-diagram-panel .start-state { fill: var(--node-fill); }
.md-diagram-panel .edgeLabel rect { opacity: 1 !important; }
.md-require-zoom-fix { height: auto; margin-top: 16px; margin-bottom: 16px; }
.md-require-zoom-fix foreignobject { font-size: var(--mermaid-font-zoom); }
.md-fences.md-fences-math { font-size: 1em; }
.md-fences-advanced:not(.md-focus) { padding: 0px; white-space: nowrap; border: 0px; }
.md-fences-advanced:not(.md-focus) { background: inherit; }
.typora-export-show-outline .typora-export-content { max-width: 1440px; margin: auto; display: flex; flex-direction: row; }
.typora-export-sidebar { width: 300px; font-size: 0.8rem; margin-top: 80px; margin-right: 18px; }
.typora-export-show-outline #write { --webkit-flex:2; flex: 2 1 0%; }
.typora-export-sidebar .outline-content { position: fixed; top: 0px; max-height: 100%; overflow: hidden auto; padding-bottom: 30px; padding-top: 60px; width: 300px; }
@media screen and (max-width: 1024px) {
  .typora-export-sidebar, .typora-export-sidebar .outline-content { width: 240px; }
}
@media screen and (max-width: 800px) {
  .typora-export-sidebar { display: none; }
}
.outline-content li, .outline-content ul { margin-left: 0px; margin-right: 0px; padding-left: 0px; padding-right: 0px; list-style: none; }
.outline-content ul { margin-top: 0px; margin-bottom: 0px; }
.outline-content strong { font-weight: 400; }
.outline-expander { width: 1rem; height: 1.42857rem; position: relative; display: table-cell; vertical-align: middle; cursor: pointer; padding-left: 4px; }
.outline-expander::before { content: ""; position: relative; font-family: Ionicons; display: inline-block; font-size: 8px; vertical-align: middle; }
.outline-item { padding-top: 3px; padding-bottom: 3px; cursor: pointer; }
.outline-expander:hover::before { content: ""; }
.outline-h1 > .outline-item { padding-left: 0px; }
.outline-h2 > .outline-item { padding-left: 1em; }
.outline-h3 > .outline-item { padding-left: 2em; }
.outline-h4 > .outline-item { padding-left: 3em; }
.outline-h5 > .outline-item { padding-left: 4em; }
.outline-h6 > .outline-item { padding-left: 5em; }
.outline-label { cursor: pointer; display: table-cell; vertical-align: middle; text-decoration: none; color: inherit; }
.outline-label:hover { text-decoration: underline; }
.outline-item:hover { border-color: rgb(245, 245, 245); background-color: var(--item-hover-bg-color); }
.outline-item:hover { margin-left: -28px; margin-right: -28px; border-left: 28px solid transparent; border-right: 28px solid transparent; }
.outline-item-single .outline-expander::before, .outline-item-single .outline-expander:hover::before { display: none; }
.outline-item-open > .outline-item > .outline-expander::before { content: ""; }
.outline-children { display: none; }
.info-panel-tab-wrapper { display: none; }
.outline-item-open > .outline-children { display: block; }
.typora-export .outline-item { padding-top: 1px; padding-bottom: 1px; }
.typora-export .outline-item:hover { margin-right: -8px; border-right: 8px solid transparent; }
.typora-export .outline-expander::before { content: "+"; font-family: inherit; top: -1px; }
.typora-export .outline-expander:hover::before, .typora-export .outline-item-open > .outline-item > .outline-expander::before { content: "−"; }
.typora-export-collapse-outline .outline-children { display: none; }
.typora-export-collapse-outline .outline-item-open > .outline-children, .typora-export-no-collapse-outline .outline-children { display: block; }
.typora-export-no-collapse-outline .outline-expander::before { content: "" !important; }
.typora-export-show-outline .outline-item-active > .outline-item .outline-label { font-weight: 700; }
.md-inline-math-container mjx-container { zoom: 0.95; }


.CodeMirror { height: auto; }
.CodeMirror.cm-s-inner { background: inherit; }
.CodeMirror-scroll { overflow: auto hidden; z-index: 3; }
.CodeMirror-gutter-filler, .CodeMirror-scrollbar-filler { background-color: rgb(255, 255, 255); }
.CodeMirror-gutters { border-right: 1px solid rgb(221, 221, 221); background: inherit; white-space: nowrap; }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: rgb(0, 0, 0); }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-property { color: rgb(0, 0, 0); }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: rgb(0, 0, 255); }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: 700; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: red; }
.cm-invalidchar { color: red; }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background: inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { height: 100%; outline: 0px; position: relative; box-sizing: content-box; background: inherit; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-gutter-filler, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-vscrollbar { position: absolute; z-index: 6; display: none; outline: 0px; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow: hidden; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow: auto hidden; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 10px; z-index: 3; overflow-y: hidden; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-wrapper { position: absolute; z-index: 4; background: 0px 0px !important; border: none !important; }
.CodeMirror-gutter-background { position: absolute; top: 0px; bottom: 0px; z-index: 4; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-radius: 0px; border-width: 0px; background: 0px 0px; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; overflow-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; }
.CodeMirror-wrap pre { overflow-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right: 30px solid transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right: none; width: auto; }
.CodeMirror-linebackground { position: absolute; inset: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right: none; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.cm-searching { background: rgba(255, 255, 0, 0.4); }
span.cm-underlined { text-decoration: underline; }
span.cm-strikethrough { text-decoration: line-through; }
.cm-tw-syntaxerror { color: rgb(255, 255, 255); background-color: rgb(153, 0, 0); }
.cm-tw-deleted { text-decoration: line-through; }
.cm-tw-header5 { font-weight: 700; }
.cm-tw-listitem:first-child { padding-left: 10px; }
.cm-tw-box { border-style: solid; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-color: inherit; border-top-width: 0px !important; }
.cm-tw-underline { text-decoration: underline; }
@media print {
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}


:root {
    --side-bar-bg-color: #fafafa;
    --control-text-color: #777;
}

@include-when-export url(https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext);

/* open-sans-regular - latin-ext_latin */
  /* open-sans-italic - latin-ext_latin */
    /* open-sans-700 - latin-ext_latin */
    /* open-sans-700italic - latin-ext_latin */
  html {
    font-size: 16px;
    -webkit-font-smoothing: antialiased;
}

body {
    font-family: "Open Sans","Clear Sans", "Helvetica Neue", Helvetica, Arial, 'Segoe UI Emoji', sans-serif;
    color: rgb(51, 51, 51);
    line-height: 1.6;
}

#write {
    max-width: 860px;
  	margin: 0 auto;
  	padding: 30px;
    padding-bottom: 100px;
}

@media only screen and (min-width: 1400px) {
	#write {
		max-width: 1024px;
	}
}

@media only screen and (min-width: 1800px) {
	#write {
		max-width: 1200px;
	}
}

#write > ul:first-child,
#write > ol:first-child{
    margin-top: 30px;
}

a {
    color: #4183C4;
}
h1,
h2,
h3,
h4,
h5,
h6 {
    position: relative;
    margin-top: 1rem;
    margin-bottom: 1rem;
    font-weight: bold;
    line-height: 1.4;
    cursor: text;
}
h1:hover a.anchor,
h2:hover a.anchor,
h3:hover a.anchor,
h4:hover a.anchor,
h5:hover a.anchor,
h6:hover a.anchor {
    text-decoration: none;
}
h1 tt,
h1 code {
    font-size: inherit;
}
h2 tt,
h2 code {
    font-size: inherit;
}
h3 tt,
h3 code {
    font-size: inherit;
}
h4 tt,
h4 code {
    font-size: inherit;
}
h5 tt,
h5 code {
    font-size: inherit;
}
h6 tt,
h6 code {
    font-size: inherit;
}
h1 {
    font-size: 2.25em;
    line-height: 1.2;
    border-bottom: 1px solid #eee;
}
h2 {
    font-size: 1.75em;
    line-height: 1.225;
    border-bottom: 1px solid #eee;
}

/*@media print {
    .typora-export h1,
    .typora-export h2 {
        border-bottom: none;
        padding-bottom: initial;
    }

    .typora-export h1::after,
    .typora-export h2::after {
        content: "";
        display: block;
        height: 100px;
        margin-top: -96px;
        border-top: 1px solid #eee;
    }
}*/

h3 {
    font-size: 1.5em;
    line-height: 1.43;
}
h4 {
    font-size: 1.25em;
}
h5 {
    font-size: 1em;
}
h6 {
   font-size: 1em;
    color: #777;
}
p,
blockquote,
ul,
ol,
dl,
table{
    margin: 0.8em 0;
}
li>ol,
li>ul {
    margin: 0 0;
}
hr {
    height: 2px;
    padding: 0;
    margin: 16px 0;
    background-color: #e7e7e7;
    border: 0 none;
    overflow: hidden;
    box-sizing: content-box;
}

li p.first {
    display: inline-block;
}
ul,
ol {
    padding-left: 30px;
}
ul:first-child,
ol:first-child {
    margin-top: 0;
}
ul:last-child,
ol:last-child {
    margin-bottom: 0;
}
blockquote {
    border-left: 4px solid #dfe2e5;
    padding: 0 15px;
    color: #777777;
}
blockquote blockquote {
    padding-right: 0;
}
table {
    padding: 0;
    word-break: initial;
}
table tr {
    border: 1px solid #dfe2e5;
    margin: 0;
    padding: 0;
}
table tr:nth-child(2n),
thead {
    background-color: #f8f8f8;
}
table th {
    font-weight: bold;
    border: 1px solid #dfe2e5;
    border-bottom: 0;
    margin: 0;
    padding: 6px 13px;
}
table td {
    border: 1px solid #dfe2e5;
    margin: 0;
    padding: 6px 13px;
}
table th:first-child,
table td:first-child {
    margin-top: 0;
}
table th:last-child,
table td:last-child {
    margin-bottom: 0;
}

.CodeMirror-lines {
    padding-left: 4px;
}

.code-tooltip {
    box-shadow: 0 1px 1px 0 rgba(0,28,36,.3);
    border-top: 1px solid #eef2f2;
}

.md-fences,
code,
tt {
    border: 1px solid #e7eaed;
    background-color: #f8f8f8;
    border-radius: 3px;
    padding: 0;
    padding: 2px 4px 0px 4px;
    font-size: 0.9em;
}

code {
    background-color: #f3f4f4;
    padding: 0 2px 0 2px;
}

.md-fences {
    margin-bottom: 15px;
    margin-top: 15px;
    padding-top: 8px;
    padding-bottom: 6px;
}


.md-task-list-item > input {
  margin-left: -1.3em;
}

@media print {
    html {
        font-size: 13px;
    }
    table,
    pre {
        page-break-inside: avoid;
    }
    pre {
        word-wrap: break-word;
    }
}

.md-fences {
	background-color: #f8f8f8;
}
#write pre.md-meta-block {
	padding: 1rem;
    font-size: 85%;
    line-height: 1.45;
    background-color: #f7f7f7;
    border: 0;
    border-radius: 3px;
    color: #777777;
    margin-top: 0 !important;
}

.mathjax-block>.code-tooltip {
	bottom: .375rem;
}

.md-mathjax-midline {
    background: #fafafa;
}

#write>h3.md-focus:before{
	left: -1.5625rem;
	top: .375rem;
}
#write>h4.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h5.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h6.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
.md-image>.md-meta {
    /*border: 1px solid #ddd;*/
    border-radius: 3px;
    padding: 2px 0px 0px 4px;
    font-size: 0.9em;
    color: inherit;
}

.md-tag {
    color: #a7a7a7;
    opacity: 1;
}

.md-toc { 
    margin-top:20px;
    padding-bottom:20px;
}

.sidebar-tabs {
    border-bottom: none;
}

#typora-quick-open {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
}

#typora-quick-open-item {
    background-color: #FAFAFA;
    border-color: #FEFEFE #e5e5e5 #e5e5e5 #eee;
    border-style: solid;
    border-width: 1px;
}

/** focus mode */
.on-focus-mode blockquote {
    border-left-color: rgba(85, 85, 85, 0.12);
}

header, .context-menu, .megamenu-content, footer{
    font-family: "Segoe UI", "Arial", sans-serif;
}

.file-node-content:hover .file-node-icon,
.file-node-content:hover .file-node-open-state{
    visibility: visible;
}

.mac-seamless-mode #typora-sidebar {
    background-color: #fafafa;
    background-color: var(--side-bar-bg-color);
}

.md-lang {
    color: #b4654d;
}

/*.html-for-mac {
    --item-hover-bg-color: #E6F0FE;
}*/

#md-notification .btn {
    border: 0;
}

.dropdown-menu .divider {
    border-color: #e5e5e5;
    opacity: 0.4;
}

.ty-preferences .window-content {
    background-color: #fafafa;
}

.ty-preferences .nav-group-item.active {
    color: white;
    background: #999;
}

.menu-item-container a.menu-style-btn {
    background-color: #f5f8fa;
    background-image: linear-gradient( 180deg , hsla(0, 0%, 100%, 0.8), hsla(0, 0%, 100%, 0)); 
}



mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
  min-height: 1px;
  min-width: 1px;
}

mjx-container[jax="SVG"] > svg a {
  fill: blue;
  stroke: blue;
}

mjx-assistive-mml {
  position: absolute !important;
  top: 0px;
  left: 0px;
  clip: rect(1px, 1px, 1px, 1px);
  padding: 1px 0px 0px 0px !important;
  border: 0px !important;
  display: block !important;
  width: auto !important;
  overflow: hidden !important;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

mjx-assistive-mml[display="block"] {
  width: 100% !important;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][display="true"][width="full"] {
  display: flex;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line], svg[data-table] > g > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame], svg[data-table] > g > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed, svg[data-table] > g > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted, svg[data-table] > g > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > g > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

mjx-container[jax="SVG"] path[data-c], mjx-container[jax="SVG"] use[data-c] {
  stroke-width: 3;
}

g[data-mml-node="xypic"] path {
  stroke-width: inherit;
}

.MathJax g[data-mml-node="xypic"] path {
  stroke-width: inherit;
}
 :root {--mermaid-font-zoom:1.23958em ;} 
</style><title>计算机网络</title>
</head>
<body class='typora-export os-windows'><div class='typora-export-content'>
<div id='write'  class=''><p><span>blog: </span><a href='https://zhuanlan.zhihu.com/p/84316213'><span>计算机网络太难？了解这一篇就够了</span></a></p><p>&nbsp;</p><h1 id='计算机网络'><span>计算机网络</span></h1><h2 id='1概念'><span>1.概念</span></h2><p><span>计算机网络是</span><strong><span>互联</span></strong><span>的、</span><strong><span>自治</span></strong><span>的计算机集合</span></p><p><span>一个将分散的、具有独立功能的计算机系统，通过通信设备与线路连接起来，由功能完善的网络实现</span><strong><span>资源共享</span></strong><span>与</span><strong><span>信息传递</span></strong><span>的系统</span></p><p><strong><span>互联</span></strong><span>：互联互通（通过通信链路）</span></p><p><strong><span>自治</span></strong><span>：没有主从关系</span></p><p>&nbsp;</p><h2 id='2功能'><span>2.功能</span></h2><ul><li><span>数据通信</span></li><li><span>资源共享 （硬件、软件、数据）</span></li><li><span>分布式处理 （多台计算机各自承担同一工作任务的不同部分）</span></li><li><span>提高可靠性</span></li><li><span>负载均衡</span></li></ul><p>&nbsp;</p><h2 id='3组成'><span>3.组成</span></h2><h3 id='组成部分'><strong><span>组成部分</span></strong></h3><p><span>硬件、软件、协议</span></p><p>&nbsp;</p><h3 id='工作方式'><strong><span>工作方式</span></strong></h3><p><span>	</span><span>（1）网络边缘：主机、网络应用</span></p><p><span>	</span><span>（2）接入网络，物理介质：有线或无线通信链路</span></p><p><span>	</span><span>（3）网络核心：路由器或分组交换机</span></p><ul><li><p><strong><span>网络边缘</span></strong></p><p><span>主机host（端系统 end system）</span></p><p><span>客户/服务器应用模型  </span><strong><span>C/S</span></strong><span> </span></p><p><span>对等应用模型 peer-to-peer </span><strong><span>P2P</span></strong></p></li><li><p><strong><span>接入网络</span></strong></p><p><span>家庭接入网络</span></p><p><span>机构（学校、企业等）接入网络</span></p><p><span>移动接入网络</span></p><p>&nbsp;</p></li></ul><h3 id='功能组成'><strong><span>功能组成</span></strong></h3><p><span>七层协议：</span></p><p><span>1.应用层</span></p><p><span>2.表示层</span></p><p><span>3.会话层</span></p><p><span>		</span><em><span>其中1、2、3为资源子网（实现资源共享共享的设备和软件的集合）</span></em></p><p><span>4.传输层</span></p><p><span>5.网络层</span></p><p><span>6.数据链路层</span></p><p><span>7.物理层</span></p><p><span>		</span><em><span>5、6、7为通信子网（各种传输介质、通信设备和对应的网络协议）</span></em></p><p>&nbsp;</p><p>&nbsp;</p><h2 id='4分类'><span>4.分类</span></h2><blockquote><p><strong><span>分布范围</span></strong></p></blockquote><p><span>广域网、城域网、局域网</span></p><blockquote><p><strong><span>交换技术</span></strong></p></blockquote><p><span>电路交换、报文交换、分组交换</span></p><blockquote><p><strong><span>拓扑结构</span></strong></p></blockquote><p><span>总线型、星型、环型、网状型</span></p><blockquote><p><strong><span>传输技术</span></strong></p></blockquote><p><span>广播式网络（共享公共通信信道）</span></p><p><span>点对点网络（使用分组转发和路由选择机制）</span></p><p>&nbsp;</p><h2 id='5性能指标'><span>5.性能指标</span></h2><ul><li><p><strong><span>速率</span></strong></p><p><span>数据传输率，传输数据位数的速率</span></p><p><span>单位：b/s，kb/s，Mb/s，Gb/s，Tb/s</span></p><p><span>1Mb/s = 10^3kb/s</span></p><p><span>（存储容量：1B=8bit，1KB=2^10B=1024B）</span></p><p>&nbsp;</p></li><li><p><strong><span>带宽</span></strong></p><ul><li><span>原本指某个信号（模拟信号）具有的频带宽度，即最高频率和最低频率之差，Hz</span></li><li><span>现在指网络的通信线路传送数据的能力，单位时间从网络中某一点到另一点能通过的最高速率，单位比特每秒 b/s</span></li><li><span>可以理解为网络设备所支持的最高速率</span></li><li><strong><span>发送端的数据速率</span></strong><span>！而非链路上的</span></li></ul><p>&nbsp;</p></li><li><p><strong><span>吞吐量</span></strong></p><p><span>单位时间内通过某个网络（或接口、信道）的数据量，单位b/s</span></p><p><span>吞吐量受网络带宽的限制</span></p><p>&nbsp;</p></li><li><p><strong><span>时延（延迟）</span></strong></p><p><span>单位s</span></p><ul><li><p><strong><span>发送时延</span></strong><span>：从发送分组的第一个比特算起，到最后一个比特发送完毕需要的时间</span></p><p><span>发送时延=数据长度/信道带宽</span></p></li><li><p><strong><span>传播时延</span></strong><span>：电磁波在信道上传播所花费的时间</span></p><p><span>传播时延=链路长度/电磁波在信道上的传播速率</span></p></li><li><p><strong><span>排队时延</span></strong><span>：等待输入/输出链路可用的等待时间</span></p></li><li><p><strong><span>处理时延</span></strong><span>：找出口、检错的时间</span></p></li></ul><p>&nbsp;</p></li><li><p><strong><span>时延带宽积</span></strong></p><p><span>时延带宽积= 传播时延*带宽，单位bit</span></p><p><span>以比特为单位的链路长度，链路上有多少bit</span></p><p>&nbsp;</p></li><li><p><strong><span>往返时延</span></strong><span>RTT</span></p><p><span>从发送方发送数据开始，到发送方收到接收方的确认所经历的时延</span></p><p>&nbsp;</p></li><li><p><strong><span>利用率</span></strong></p><ul><li><p><span>信道利用率</span></p><p><span>信道上有数据传播的时间/总时间</span></p></li><li><p><span>网络利用率</span></p><p><span>信道利用率加权平均值</span></p></li></ul><p><span>利用率高，时延高</span></p><p>&nbsp;</p></li></ul><h2 id='6分层'><span>6.分层</span></h2><p><span>活动对象：实体</span></p><p><span>同一层的实体：对等实体</span></p><p><span>协议：只有对等实体之间才有协议</span></p><p><span>网络中对等实体数据交换而建立的规则、标准、约定</span></p><p><span>两层之间：接口</span></p><p><span>上层使用下层的服务</span></p><p><span>下层为上层提供服务</span></p><p>&nbsp;</p><p><span>SDU 服务数据单元</span></p><p><span>PCI 协议控制信息</span></p><p><span>PDU 协议数据单元：对等层次之间传送的数据单位</span></p><p>&nbsp;</p><h2 id='7osi参考模型'><span>7.OSI参考模型</span></h2><p><span>七层模型</span></p><ul><li></li></ul><p>&nbsp;</p><h2 id='8网络协议'><span>8.网络协议</span></h2><p><strong><span>network protocol ，进行网络中数据交换而建立的规则、标准或约定</span></strong></p><p><span>规范了网络中所有信息的发送和接受过程</span></p><p><span>规定了通信实体之间交换信息的</span><strong><span>格式</span></strong><span>、</span><strong><span>意义</span></strong><span>、</span><strong><span>顺序</span></strong><span>及针对收到信息或发生事件而采取的</span><strong><span>动作</span></strong></p><p><span>3要素：</span></p><ul><li><p><strong><span>语法 syntax</span></strong><span>：</span></p><ul><li><span>数据与控制信息的结构或格式 </span></li><li><span>（底层）信号电平</span></li></ul></li><li><p><strong><span>语义semantics：</span></strong></p><ul><li><span>需要发出何种控制信息</span></li><li><span>完成何种动作及何种相应</span></li><li><span>差错控制</span></li></ul></li><li><p><strong><span>时序 timing</span></strong><span>：</span></p><ul><li><span>事件顺序</span></li><li><span>速度匹配</span></li></ul></li></ul><p>&nbsp;</p><ul><li><p><strong><span>网络核心</span></strong></p><p><span>关键功能：</span></p><p><strong><span>路由</span></strong><span> routing ：确定分组从源到目的地的传输路径</span></p><p><strong><span>转发</span></strong><span> forwarding：将分组从路由器的输入端口交换至正确的输出端口</span></p></li></ul><p>&nbsp;</p><h2 id='9数据交换方式'><span>9.数据交换方式</span></h2><p><span>电路交换和分组交换</span></p><h3 id='1电路交换'><span>1.电路交换</span></h3><p><span>	</span><span>建立电路</span></p><p><span>	</span><span>进行通信</span></p><p><span>	</span><span>拆除电路</span></p><p><span>资源独占，会预留电路</span></p><p><span>优点：通信时延小、有序冲突、没有冲突、实时性强</span></p><p><span>缺点：使用效率低、灵活性差、无差错控制能力</span></p><p>&nbsp;</p><h3 id='2报文交换'><span>2.报文交换</span></h3><p><span>源发送信息整体</span></p><p><span>整个报文整体转发</span></p><p><span>上世纪的电报</span></p><p>&nbsp;</p><h3 id='3分组交换'><span>3.分组交换</span></h3><p><span>分组packet</span></p><p><span>报文分拆出来的一系列较小的数据包，要加上头部信息</span></p><p><span>分组交换需要报文的拆分和重组</span></p><p><span>会产生额外开销</span></p><p><img src="计算机网络.assets/image-20210815101857904.png" alt="image-20210815101857904" style="zoom:80%;" /><span> </span></p><p><strong><span>都采用存储-转发交换方式</span></strong></p><p><img src="计算机网络.assets/image-20210815102040858.png" referrerpolicy="no-referrer" alt="image-20210815102040858"><span> </span></p><p>&nbsp;</p><h2 id='信道访问介质控制'><span>信道访问介质控制</span></h2><p><span>常用的两种链路</span></p><ul><li><p><span>点对点链路</span></p><p><span>两个相邻结点通过一个链路相连，没有第三者</span></p><p><span>PPP协议，常用于广域网</span></p></li><li><p><span>广播式链路</span></p><p><span>所用主机共享通信介质</span></p><p><span>常用与局域网</span></p></li></ul><p><img src="计算机网络.assets/image-20210815095509139.png" referrerpolicy="no-referrer" alt="image-20210815095509139"><span> </span></p><p>&nbsp;</p><h3 id='电路交换中的多路复用技术'><span>电路交换中的多路复用技术</span></h3><p><span>（1）频分多路复用——FDM</span></p><p><span>	</span><span>各用户占用不同的带宽资源（这里值频率带宽，Hz，而非数据发送速率）</span></p><p><span>	</span><span>用户在分配到一定的频带后，在通信过程中始终占用这个频带</span></p><p><span>	</span><span>最常见的：有线电视信号</span></p><p><span>（2）时分多路复用——TDM</span></p><p><span>	</span><span>将时间划分为一段段等长的时分复用帧，每个用户在每个帧中占用固定序号的时隙</span></p><p><img src="C:\Users\MaroonCs\AppData\Roaming\Typora\typora-user-images\image-20210407164815192.png" alt="image-20210407164815192" style="zoom: 67%;" /><span> </span></p><p><span>	</span><span>统计时分复用</span></p><p><img src="计算机网络.assets/image-20210815094649499.png" alt="image-20210815094649499" style="zoom:80%;" /><span> </span></p><p><span>（3）波分多路复用——WDM</span></p><p><span>	</span><span>即光的频分复用</span></p><p><span>	</span><span>在一根光纤中传输多种不同波长（频率）的光信号，由于波长不同，各路光信号互不干扰，最后再用波长分解复用器将波长分解出来</span></p><p><span>（4）码分多路复用——CDM</span></p><p><span>	</span><span>广泛用于无线链路共享</span></p><p><span>、码分多址CDMA是码分复用的一种方式</span></p><p><span>	</span><span>1bit被分为多个码片</span></p><p><span>	</span><span>每个用户分配一个唯一的m bit的码片序列（chipping sequence）</span></p><p><span>	</span><img src="计算机网络.assets/image-20210815095445109.png" referrerpolicy="no-referrer" alt="image-20210815095445109"><span> </span></p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><h3 id='4统计多路复用'><span>4.统计多路复用</span></h3><p><span>分组延迟和丢失</span></p><p><img src="C:\Users\MaroonCs\AppData\Roaming\Typora\typora-user-images\image-20210407174105113.png" alt="image-20210407174105113" style="zoom:67%;" /><span> </span></p><p><img src="C:\Users\MaroonCs\AppData\Roaming\Typora\typora-user-images\image-20210407174048488.png" alt="image-20210407174048488" style="zoom:67%;" /><span> </span></p><p><img src="C:\Users\MaroonCs\AppData\Roaming\Typora\typora-user-images\image-20210407174345782.png" alt="image-20210407174345782" style="zoom: 67%;" /><span> </span></p><p>&nbsp;</p><h1 id='分层结构'><span>分层结构</span></h1><p><span>分层</span></p><p><span>协议是控制两个对等实体进行通信的规则的集合，是”水平的“</span></p><p><span>任一层实体需要使用下层服务，遵循本层协议，向上层提供服务，服务是”垂直的“</span></p><p><span>下层协议的实现对于上层是透明的，上层是看不见的</span></p><p><span>相邻层实体间通过接口进行交互，通过服务访问点SAP，交换原语</span></p><p>&nbsp;</p><h2 id='1osi参考模型'><span>1.OSI参考模型</span></h2><p><img src="C:\Users\MaroonCs\AppData\Roaming\Typora\typora-user-images\image-20210407192907535.png" alt="image-20210407192907535" style="zoom:67%;" /><span> </span></p><ul><li><p><strong><span>应用层</span></strong></p><p><span>用户与网络的界面，所有能与用户交互产生网络流量的程序</span></p><p>&nbsp;</p></li><li><p><strong><span>表示层</span></strong></p><p><span>用于处理在两个通信系统中交换信息的表示方式（语法和语义）</span></p><ol start='' ><li><span>数据格式交换</span></li><li><span>数据加密解密</span></li><li><span>数据压缩与恢复</span></li></ol><p>&nbsp;</p></li><li><p><strong><span>会话层</span></strong></p><p><span>向表示层的实体/用户进程提供建立连接并在连接上有序的传输数据，即会话，建立同步</span></p><ol start='' ><li><span>建立、管理、终止会话</span></li><li><span>使用校验点，使会话在通信失效时从校验点/同步点继续恢复通信，实现数据同步</span></li></ol><p>&nbsp;</p></li><li><p><strong><span>传输层</span></strong></p><p><strong><em><span>负责主机中两个进程的通信，即端到端的通信</span></em></strong></p><p><span>每个进程都有一个端口号，来标识这个进程</span></p><ol start='' ><li><p><span>可靠传输、不可靠传输</span></p></li><li><p><span>差错控制</span></p></li><li><p><span>流量控制</span></p></li><li><p><span>复用分用</span></p><p><span>复用：多个应用层进程可同时使用下面传输层的服务</span></p><p><span>分用：传输层把收到的信息分别交付给上面应用层中相应的进程</span></p></li></ol><p>&nbsp;</p></li></ul><p><em><span>上面四层：端到端通信（进程之间的通信，通过端口号区分）</span></em></p><p>&nbsp;</p><ul><li><p><strong><span>网络层</span></strong></p><p><span>把分组从源端传到目的端，为分组交换机上不同主机提供通信服务</span></p><ol start='' ><li><span>路由选择</span></li><li><span>流量控制</span></li><li><span>差错控制</span></li><li><span>拥塞控制</span></li></ol><p>&nbsp;</p></li><li><p><strong><span>数据链路层</span></strong></p><p>&nbsp;</p></li><li><p><strong><span>物理层</span></strong></p><p><span>在物理媒体上实现比特流的透明传输</span></p><p><span>传输模式：</span></p><p><span>单工、双工、半双工</span></p><p>&nbsp;</p></li></ul><p><em><span>下面三层：点到点通信</span></em></p><p>&nbsp;</p><h2 id='2五层英特网协议'><span>2.五层英特网协议</span></h2><h3 id='1应用层-application-layer'><span>1.应用层 </span><em><span>application-layer</span></em></h3><p><span>任务：</span><strong><span>通过应用进程间的交互来完成特定网络应用</span></strong><span>。</span></p><p><span>应用层协议：定义的是应用进程（进程：主机中正在运行的程序）间的通信和交互的规则</span></p><p><em><span>数据单元</span></em><span>：</span><strong><span>报文  </span><em><span>Message</span></em></strong></p><p>&nbsp;</p><h3 id='2运输层-transport-layer'><span>2.运输层 </span><em><span>transport layer</span></em></h3><p><span>任务：</span><strong><span>负责向两台主机进程之间的通信提供通用的数据传输服务。应用进程利用该服务传送应用层报文。</span></strong></p><p><strong><em><span>负责主机中两个进程的通信，即端到端的通信</span></em></strong></p><p><span>通用的：指多种应用可以使用同一个运输层服务。</span></p><p><span>运输层有复用和分用的功能</span></p><ul><li><span>复用：多个应用层进程可同时使用下面运输层的服务</span></li><li><span>分用：运输层把收到的信息分别交付上面应用层中的相应进程</span></li></ul><p><em><span>数据单元</span></em><span>：</span><strong><span>报文段 </span><em><span>Segment</span></em></strong></p><p>&nbsp;</p><h3 id='3网络层'><span>3.网络层 </span></h3><p><span>任务：</span><strong><span>是选择合适的网间路由和交换结点， 将网络层分组从一台主机传输到另一台主机</span></strong></p><p><strong><em><span>把分组从源端传到目的端，为分组交换机上不同主机提供通信服务</span></em></strong></p><p><span>运输层协议会向网络层递交报文段和目标地址</span></p><p><em><span>网络层分组</span></em><span>：</span><strong><span>数据报 </span><em><span>Datagram</span></em></strong></p><p>&nbsp;</p><h3 id='4数据链路层-data-link-layer'><span>4.数据链路层 </span><em><span>data link layer</span></em></h3><p><span>两台主机之间的数据传输，总是在一段一段的链路上传送的，这就需要使用专门的链路层的协议</span></p><p><span>两个相邻节点之间传送数据时，数据链路层将网络层交下来的 IP 数据报组装成</span><strong><span>帧</span></strong><span>，在两个相邻节点间的链路上传送帧。</span></p><p><span>每一帧包括数据和必要的控制信息（如：同步信息，地址信息，差错控制等）</span></p><p><span>控制信息使接收端能够知道一个帧从哪个比特开始和到哪个比特结束。这样，数据链路层在收到一个帧后，就可从中提出数据部分，上交给网络层。控制信息还使接收端能够检测到所收到的帧中有无差错。如果发现差错，数据链路层就简单地丢弃这个出了差错的帧，以避免继续在网络中传送下去白白浪费网络资源。</span></p><p><span>链路层分组：</span><strong><span>帧</span></strong></p><p>&nbsp;</p><h3 id='5物理层-physical-layer'><strong><span>5.物理层 </span><em><span>physical layer</span></em></strong></h3><p><strong><em><span>在物理媒体上实现比特流的透明传输</span></em></strong></p><p><span>尽可能屏蔽掉具体传输介质和物理设备的差异</span></p><p>&nbsp;</p><h2 id='3主要协议'><span>3.主要协议</span></h2><p><img src="计算机网络.assets/image-20210510004513339.png" alt="image-20210510004513339" style="zoom:80%;" /><span>  </span></p><p><img src="计算机网络.assets/image-20210510004527877.png" alt="image-20210510004527877" style="zoom:67%;" /><span> </span></p><p><img src="计算机网络.assets/image-20210510004538978.png" alt="image-20210510004538978" style="zoom:67%;" /><span> </span></p><p><img src="计算机网络.assets/image-20210510004547703.png" alt="image-20210510004547703" style="zoom:80%;" /><span> </span></p><p><span>  </span><img src="计算机网络.assets/image-20210510004557555.png" alt="image-20210510004557555" style="zoom:67%;" /></p><p>&nbsp;</p><h1 id='应用层'><span>应用层</span></h1><p>&nbsp;</p><h2 id='网络应用模型'><span>网络应用模型</span></h2><h4 id='体系结构'><span>体系结构</span></h4><p><strong><span>（1）客户机/服务器体系结构</span></strong></p><p><span>客户机之间相互不直接通信</span></p><p><span>服务器有固定的、周知的地址</span></p><p><strong><span>（2）P2P体系结构</span></strong></p><p><span>任意间连接的主机对——对等方，相互直接通信</span></p><p><em><span>具有自扩展性</span></em></p><p>&nbsp;</p><h4 id='进程通信'><span>进程通信</span></h4><p><span>1.客户机与服务器进程</span></p><p><span>在给定的一对进程的通信会话中</span></p><p><span>客户机：发起通信的进程</span></p><p><span>服务器：在会话开始时等待联系的进程</span></p><p><span>2.套接字</span></p><p><span>进程通过套接字（socket）在网络上发送和接受报文</span></p><p><span>套接字算是应用程序和网络直接的应用程序接口（API）</span></p><p><span>是应用程序进程和运输层协议直接的接口</span></p><p><img src="计算机网络.assets/image-20210405225832179.png" alt="image-20210405225832179" style="zoom: 67%;" /><span> </span></p><p>&nbsp;</p><p>&nbsp;</p><h2 id='http协议'><span>HTTP协议</span></h2><p><span>超文本传输协议（HTTP）</span></p><p><strong><span>端口80</span></strong></p><p>&nbsp;</p><p><span>由两部分实现：</span></p><p><span>客户机程序和服务器程序，运行在不同端系统中，通过交换HTTP报文进行会话</span></p><p>&nbsp;</p><h3 id='1通过url寻址'><span>1.通过URL寻址</span></h3><p><strong><span>统一资源定位符</span></strong></p><p><span>URL地址由两部分组成：存放对象的服务器主机名和对象的路径名</span></p><p><img src="计算机网络.assets/image-20210816163822390.png" alt="image-20210816163822390" style="zoom: 50%;" /><span> </span></p><p>&nbsp;</p><h3 id='2在浏览器中输入-url-地址到显示主页的过程'><span>2.在浏览器中输入 URL 地址到显示主页的过程？</span></h3><p><strong><span>HTTP使用TCP作为支撑它的运输层协议</span></strong></p><p><span>HTTP客户机发起一个与服务器的TCP连接，一旦连接建立，浏览器和服务器进程就可以通过套接字接口访问TCP</span></p><p><img src="计算机网络.assets/image-20210816164331107.png" alt="image-20210816164331107" style="zoom:67%;" /></p><ol start='' ><li><strong><span>DNS 解析</span></strong><span>：浏览器查询 DNS，获取域名对应的 IP 地址：具体过程包括浏览器搜索自身的 DNS 缓存、搜索操作系统的 DNS 缓存、读取本地的 Host 文件和向本地 DNS 服务器进行查询等。对于向本地 DNS 服务器进行查询，如果要查询的域名包含在本地配置区域资源中，则返回解析结果给客户机，完成域名解析(此解析具有权威性)；如果要查询的域名不由本地 DNS 服务器区域解析，但该服务器已缓存了此网址映射关系，则调用这个 IP 地址映射，完成域名解析（此解析不具有权威性）。如果本地域名服务器并未缓存该网址映射关系，那么将根据其设置发起递归查询或者迭代查询；</span></li><li><strong><span>TCP 连接</span></strong><span>：浏览器获得域名对应的 IP 地址以后，浏览器向服务器请求建立链接，发起三次握手；</span></li><li><strong><span>发送 HTTP 请求</span></strong><span>：TCP 连接建立起来后，浏览器向服务器发送 HTTP 请求；</span></li><li><strong><span>服务器处理请求并返回 HTTP 报文</span></strong><span>：服务器接收到这个请求，并根据路径参数映射到特定的请求处理器进行处理，并将处理结果及相应的视图返回给浏览器；</span></li><li><strong><span>浏览器解析渲染页面</span></strong><span>：浏览器解析并渲染视图，若遇到对 js 文件、css 文件及图片等静态资源的引用，则重复上述步骤并向服务器请求这些资源；浏览器根据其请求到的资源、数据渲染页面，最终向用户呈现一个完整的页面。</span></li><li><strong><span>连接结束</span></strong><span>。</span></li></ol><p>&nbsp;</p><h3 id='3非持久连接和持久连接'><span>3.非持久连接和持久连接</span></h3><p><span>对于一系列周期性或间断性的请求，对于每个请求/响应对</span></p><p><span>非持久连接：经一个单独的TCP连接发送</span></p><p><span>持久连接：使用相同的TCP连接发送</span></p><p><span>默认下HTTP使用持久连接</span></p><p><span> </span></p><h3 id='4http两种报文'><span>4.HTTP两种报文</span></h3><p><span>面向文本，ASCⅡ</span></p><h4 id='1）请求报文'><span>（1）请求报文</span></h4><p><img src="计算机网络.assets/image-20210816164746868.png" alt="image-20210816164746868" style="zoom:50%;" /><span> </span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="java"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.29412px; left: 7.99161px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">GET</span> <span class="cm-operator">/</span><span class="cm-variable">somedir</span><span class="cm-operator">/</span><span class="cm-variable">page</span>.<span class="cm-variable">html</span> <span class="cm-variable">HTTP</span><span class="cm-operator">/</span><span class="cm-number">1.1</span> <span class="cm-comment">//请求行,之后为首部行</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">HOST</span>:<span class="cm-variable">WWW</span>.<span class="cm-variable">baidu</span>.<span class="cm-variable">com</span> <span class="cm-comment">//定义主机</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Connection</span>: <span class="cm-variable">close</span><span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-comment">//不使用持久连接</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">User</span><span class="cm-operator">-</span><span class="cm-variable">Agent</span>: <span class="cm-variable">Mozilla</span><span class="cm-operator">/</span><span class="cm-number">4.0</span><span class="cm-tab" role="presentation" cm-text="	"> </span><span class="cm-comment">//定义用户代理</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Accept</span><span class="cm-operator">-</span><span class="cm-variable">language</span>: <span class="cm-variable">cn</span> </span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 113px;"></div><div class="CodeMirror-gutters" style="display: none; height: 113px;"></div></div></div></pre><p><strong><span>请求行</span></strong><span>：3个字段：方法字段、URL字段、HTTP协议版本字段</span></p><p><strong><span>首部行</span></strong></p><p><strong><span>实体主体</span></strong></p><p>&nbsp;</p><p><span>方法字段：</span></p><ul><li><p><span>GET：获取资源，当前网络中绝大部分使用的都是 GET</span></p></li><li><p><span>POST，</span><strong><span>首部行后面还有“实体主体”</span></strong><span>；常在提交表单时使用POST</span></p><p><span>不过也可以使用扩展的URL，在GET方法里用表单生成请求报文</span></p></li><li><p><span>HEAD：类似于GET，但是服务器收到请求时，会用一个HTTP报文响应，</span><strong><span>但是不返回请求对象</span></strong></p></li></ul><ul><li><span>PUT：将对象上传到指定的Web服务器上指定的路径</span></li></ul><ul><li><span>DELETE：删除Web服务器上的对象</span></li></ul><p>&nbsp;</p><h4 id='2）响应报文'><span>（2）响应报文</span></h4><p><img src="计算机网络.assets/image-20210816164819238.png" alt="image-20210816164819238" style="zoom:50%;" /><span> </span></p><p><strong><span>初始状态行</span></strong><span>：协议版本、状态码、相应状态信息</span></p><p><strong><span>首部行</span></strong></p><p><strong><span>实体主体</span></strong></p><p>&nbsp;</p><p><span>实体主体：data，是报文的主体</span></p><p><span>状态码：</span></p><ul><li><p><strong><span>1xx：信息</span></strong></p><ul><li><span>100 continue：目前正常，客户端可以继续发送请求或者忽略这个响应</span></li></ul></li><li><p><strong><span>2xx：成功</span></strong></p><ul><li><span>200 OK</span></li><li><span>204 No Content：请求已经成功处理，但是返回的响应报文不包含实体的主体部分。一般在只需要从客户端往服务器发送信息，而不需要返回数据时使用。</span></li><li><span>206: Partial Content ：表示客户端进行了范围请求，响应报文包含由 Content-Range 指定范围的实体内容。</span></li></ul></li><li><p><strong><span>3xx：重定向</span></strong></p><ul><li><span>301 Moved Permanently ：永久性重定向</span></li><li><span>302 Found ：临时性重定向</span></li><li><span>303 See Other ：和 302 有着相同的功能，但是 303 明确要求客户端应该采用 GET 方法获取资源</span></li><li><span>304 Not Modified ：如果请求报文首部包含一些条件，例如：If-Match，If-Modified-Since，If-None-Match，If-Range，If-Unmodified-Since，如果不满足条件，则服务器会返回 304 状态码。</span></li><li><span>307 Temporary Redirect ：临时重定向，与 302 的含义类似，但是 307 要求浏览器不会把重定向请求的 POST 方法改成 GET 方法</span></li></ul></li><li><p><strong><span>4xx：客户端错误</span></strong></p><ul><li><span>400 Bad Request ：请求报文中存在语法错误。</span></li><li><span>401 Unauthorized ：该状态码表示发送的请求需要有认证信息（BASIC 认证、DIGEST 认证）。如果之前已进行过一次请求，则表示用户认证失败。</span></li><li><span>403 Forbidden ：请求被拒绝。</span></li><li><span>404 Not Found</span></li></ul></li><li><p><strong><span>5xx：服务器错误</span></strong></p><ul><li><span>500 Internal Server Error ：服务器正在执行请求时发生错误；</span></li><li><span>503 Service Unavailable ：服务器暂时处于超负载或正在进行停机维护，现在无法处理请求</span></li></ul></li></ul><p><span> </span></p><h3 id='5-get-和-post-的区别'><span>5. GET 和 POST 的区别</span></h3><p><span>GET 和 POST 本质都是 HTTP 请求，只不过对它们的作用做了界定和适配，并且让他们适应各自的场景。</span></p><p><span>本质区别：GET 只是一次 HTTP请求，POST 先发请求头再发请求体，实际上是两次请求。</span></p><ol><li><span>从功能上讲，GET 一般用来从服务器上获取资源，POST 一般用来更新服务器上的资源；</span></li><li><span> 从 REST 服务角度上说，GET 是幂等的，即读取同一个资源，总是得到相同的数据，而 POST 不是幂等的，因为每次请求对资源的改变并不是相同的；进一步地，GET 不会改变服务器上的资源，而 POST 会对服务器资源进行改变；</span></li><li><span> 从请求参数形式上看，GET 请求的数据会附在 URL 之后，即将请求数据放置在 HTTP 报文的 请求头 中，以 ? 分割 URL 和传输数据，参数之间以 &amp; 相连。特别地，如果数据是英文字母/数字，原样发送；否则，会将其编码为 application/x-www-form-urlencoded MIME 字符串(如果是空格，转换为+，如果是中文/其他字符，则直接把字符串用 BASE64 加密，得出如：%E4%BD%A0%E5%A5%BD，其中 ％XX 中的 XX 为该符号以 16 进制表示的 ASCII)；而 POST 请求会把提交的数据则放置在是 HTTP 请求报文的 请求体 中；</span></li><li><span> 就安全性而言，POST 的安全性要比 GET 的安全性高，因为 GET 请求提交的数据将明文出现在 URL 上，而且 POST 请求参数则被包装到请求体中，相对更安全；</span></li><li><span> 从请求的大小看，GET 请求的长度受限于浏览器或服务器对 URL 长度的限制，允许发送的数据量比较小，而 POST 请求则是没有大小限制的。</span></li></ol><p>&nbsp;</p><h3 id='6forward-和-redirect-的区别'><span>6.forward 和 redirect 的区别？</span></h3><p><span>转发和重定向</span></p><p><span>直接转发方式（Forward）：客户端和浏览器只发出一次请求，Servlet、HTML、JSP 或其它信息资源，由第二个信息资源响应该请求，在请求对象 request 中，保存的对象对于每个信息资源是共享的。</span></p><p><span>间接转发方式（Redirect）：实际是两次 HTTP 请求，服务器端在响应第一次请求的时候，让浏览器再向另外一个 URL 发出请求，从而达到转发的目的</span></p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><h2 id='dns系统'><span>DNS系统</span></h2><p><strong><span>域名到ip地址的转换</span></strong></p><p><img src="计算机网络.assets/image-20210815183913626.png" alt="image-20210815183913626" style="zoom: 50%;" /><span> </span></p><p><img src="计算机网络.assets/image-20210815184433216.png" alt="image-20210815184433216" style="zoom: 50%;" /><span> </span></p><p><span>localhost：本地主机，相对应的IP地址为127.0.0.1（IPv4)）和[::1]（IPv6)）</span></p><p>&nbsp;</p><h3 id='域名解析过程'><span>域名解析过程</span></h3><p><img src="计算机网络.assets/image-20210815184835009.png" alt="image-20210815184835009" style="zoom: 50%;" /><span> </span></p><ol start='' ><li><p><span>递归查询 </span></p><p><span>所谓递归查询就是：如果主机所询问的本地域名服务器不知道被查询的域名的 IP 地址，那么本地域名服务器就以 DNS 客户的身份，向根域名服务器继续发出查询请求报文(即替主机继续查询)，而不是让主机自己进行下一步查询。因此，递归查询返回的查询结果或者是所要查询的 IP 地址，或者是报错，表示无法查询到所需的 IP 地址。</span></p></li><li><p><span>迭代查询</span></p><p><span>迭代查询的特点：当根域名服务器收到本地域名服务器发出的迭代查询请求报文时，要么给出所要查询的 IP 地址，要么告诉本地服务器：“你下一步应当向哪一个域名服务器进行查询”。然后让本地服务器进行后续的查询。根域名服务器通常是把自己知道的顶级域名服务器的 IP 地址告诉本地域名服务器，让本地域名服务器再向顶级域名服务器查询。顶级域名服务器在收到本地域名服务器的查询请求后，要么给出所要查询的 IP 地址，要么告诉本地服务器下一步应当向哪一个权限域名服务器进行查询。最后，本地域名服务器得到了所要解析的 IP 地址或报错，然后把这个结果返回给发起查询的主机。</span></p></li></ol><p>&nbsp;</p><h3 id='域名缓存'><span>域名缓存</span></h3><p><span>为了提高 DNS 查询效率，并减轻服务器的负荷和减少因特网上的 DNS 查询报文数量，在域名服务器中广泛使用了高速缓存，用来存放最近查询过的域名以及从何处获得域名映射信息的记录。</span></p><p><span>由于名字到地址的绑定并不经常改变，为保持高速缓存中的内容正确，域名服务器应为每项内容设置计时器并处理超过合理时间的项（例如：每个项目两天）。当域名服务器已从缓存中删去某项信息后又被请求查询该项信息，就必须重新到授权管理该项的域名服务器绑定信息。当权限服务器回答一个查询请求时，在响应中都指明绑定有效存在的时间值。增加此时间值可减少网络开销，而减少此时间值可提高域名解析的正确性。</span></p><p><span>不仅在本地域名服务器中需要高速缓存，在主机中也需要。许多主机在启动时从本地服务器下载名字和地址的全部数据库，维护存放自己最近使用的域名的高速缓存，并且只在从缓存中找不到名字时才使用域名服务器。维护本地域名服务器数据库的主机应当定期地检查域名服务器以获取新的映射信息，而且主机必须从缓存中删除无效的项。由于域名改动并不频繁，大多数网点不需花精力就能维护数据库的一致性</span></p><p>&nbsp;</p><h2 id='ftp-文件传输协议'><span>FTP 文件传输协议</span></h2><p><span>提供不同种类主机系统（软、硬件都不同）之间的文件传输能力</span></p><p><span>上传</span></p><p><span>下载</span></p><p>&nbsp;</p><p><span>FTP服务器与用户端</span></p><p><strong><span>是基于客户/服务器（C/S）的协议</span></strong></p><p>&nbsp;</p><ul><li><strong><span>FTP使用TCP使用可靠传输</span></strong></li></ul><ul><li><strong><span>端口 21</span></strong></li></ul><p><img src="计算机网络.assets/image-20210816155432677.png" alt="image-20210816155432677" style="zoom: 50%;" /><span> </span></p><p><img src="计算机网络.assets/image-20210816155830980.png" alt="image-20210816155830980" style="zoom:50%;" /><span> </span></p><p>&nbsp;</p><p><span>FTP传输模式</span></p><ul><li><span>文本模式：ASCⅡ模式，以文本序列传输数据</span></li><li><span>二进制模式：Binary模式，以二进制序列传输数据</span></li></ul><p>&nbsp;</p><h2 id='电子邮件系统'><span>电子邮件系统</span></h2><p><span>组成</span></p><p><img src="计算机网络.assets/image-20210816160549439.png" alt="image-20210816160549439" style="zoom:50%;" /><span> </span></p><p><span>都是TCP连接</span></p><p>&nbsp;</p><h3 id='smtp-简单邮件传送协议'><span>SMTP 简单邮件传送协议</span></h3><p><span>端口25</span></p><p><span>TCP连接</span></p><p><span>C/S方式</span></p><p><span>SMTP规定了在两个相互通信的SMTP进程之间如何交换信息</span></p><p><span>负责发送邮件的SMTP进程是SMTP客户,负责接受邮件的进程是SMTP服务器</span></p><p><span>SMTP规定了14条命令（几个字母）和21种应答信息（三位数字代码和简单文字说明）</span></p><p><img src="计算机网络.assets/image-20210816161215557.png" alt="image-20210816161215557" style="zoom:50%;" /><span> </span></p><p><span>缺点：</span></p><p><span>1.SMTP不能传送可执行文件或其他二进制对象</span></p><p><span>2.SMTP仅限于传送7位ASCⅡ</span></p><p><span>3.SMTP服务器会拒绝超过一定长度的邮件</span></p><p><img src="计算机网络.assets/image-20210816161414089.png" alt="image-20210816161414089" style="zoom:50%;" /><span> </span></p><p>&nbsp;</p><h3 id='pop3-邮局协议'><span>POP3 邮局协议</span></h3><p><span>端口号110</span></p><p><span>TCP连接</span></p><p><span>C/S方式</span></p><p><img src="计算机网络.assets/image-20210816161540004.png" alt="image-20210816161540004" style="zoom:50%;" /><span> </span></p><p>&nbsp;</p><h3 id='imap-网际报文存取协议'><span>IMAP 网际报文存取协议</span></h3><p><img src="计算机网络.assets/image-20210816161716157.png" alt="image-20210816161716157" style="zoom: 50%;" /><span> </span></p><p>&nbsp;</p><h3 id='基于万维网的电子邮件'><span>基于万维网的电子邮件</span></h3><p><img src="计算机网络.assets/image-20210816161810240.png" alt="image-20210816161810240" style="zoom:50%;" /><span> </span></p><p>&nbsp;</p><h2 id='dhcp协议'><span>DHCP协议</span></h2><p><strong><span>分配IP地址</span></strong></p><ul><li><span>静态配置</span></li><li><span>动态配置</span></li></ul><p><img src="计算机网络.assets/image-20210815151438058.png" alt="image-20210815151438058" style="zoom: 80%;" /><span> </span></p><p>&nbsp;</p><h1 id='传输层'><span>传输层</span></h1><p><span>提供进程和进程之间的逻辑通信</span></p><p><span>逻辑端口：传输层中标识主机中的应用进程</span></p><p><span>端口号只有本地意义</span></p><p><img src="计算机网络.assets/image-20210815165715865.png" alt="image-20210815165715865" style="zoom: 80%;" /><span> </span></p><p>&nbsp;</p><p><strong><span>套接字Socket</span></strong></p><p><span>唯一标识了网络上的主机和一个进程</span></p><p><span>主机IP地址，端口号</span></p><p>&nbsp;</p><p>&nbsp;</p><h2 id='1tcp-传输控制协议'><span>1.TCP 传输控制协议</span></h2><h3 id='1主要特点-1'><span>1.主要特点</span></h3><ol start='' ><li><p><span>TCP 是面向连接的。（就好像打电话一样，通话前需要先拨号建立连接，通话结束后要挂机释放连接）</span></p></li><li><p><span>每一条 TCP 连接只能有两个端点，每一条 TCP 连接只能是点对点的（一对一）；</span></p><p><span>所以TCP不能用于广播或者多播的方式</span></p></li><li><p><span>TCP 提供可靠交付的服务。通过 TCP 连接传送的数据，无差错、不丢失、不重复、并且按序到达</span></p></li><li><p><span>TCP 提供全双工通信。TCP 允许通信双方的应用进程在任何时候都能发送数据。</span></p><p><span>TCP 连接的两端都设有发送缓存和接收缓存，用来临时存放双方通信的数据</span></p></li><li><p><span>面向字节流。TCP 中的“流”（Stream）指的是流入进程或从进程流出的字节序列。</span></p><p><span>“面向字节流”的含义是：虽然应用程序和 TCP 的交互是一次一个数据块（大小不等），但 TCP 把应用程序交下来的数据仅仅看成是一连串的无结构的字节流。</span></p></li></ol><p>&nbsp;</p><h3 id='2首部结构'><span>2.首部结构</span></h3><p><span>长度是4B的倍数</span></p><p><span>固定首部20B</span></p><p><img src="计算机网络.assets/image-20210815171812263.png" alt="image-20210815171812263" style="zoom:80%;" /><span> </span></p><p><img src="计算机网络.assets/image-20210815172224608.png" referrerpolicy="no-referrer" alt="image-20210815172224608"><span> </span></p><p>&nbsp;</p><p>&nbsp;</p><h3 id='3三次握手'><span>3.三次握手</span></h3><p><img src="计算机网络.assets/image-20210516153748290.png" alt="image-20210516153748290" style="zoom:80%;" /><span> </span></p><p><span>TCP 建立连接的过程叫做握手，握手需要在客户和服务器之间交换三个 TCP 报文段</span></p><p><span>最初客户端和服务端都处于 CLOSED(关闭) 状态。本例中 A（Client） 主动打开连接，B（Server） 被动打开连接。</span></p><p><span>一开始，B 的 TCP 服务器进程首先创建传输控制块TCB，准备接受客户端进程的连接请求。然后服务端进程就处于 LISTEN(监听) 状态，等待客户端的连接请求。如有，立即作出响应。</span></p><ul><li><span>第一次握手：A 的 TCP 客户端进程也是首先创建传输控制块 TCB。然后，在打算建立 TCP 连接时，向 B 发出连接请求报文段，这时首部中的同步位 SYN=1，同时选择一个初始序号 seq = x（随机）。TCP 规定，SYN 报文段（即 SYN = 1 的报文段）</span><strong><span>不能携带数据</span></strong><span>，但要消耗掉一个序号。这时，TCP 客户进程进入 SYN-SENT（同步已发送）状态。</span></li><li><span>第二次握手：B 收到连接请求报文后，如果同意建立连接，则向 A 发送确认。在确认报文段中应把 SYN 位和 ACK 位都置 1，确认号是 ack = x + 1，同时也为自己选择一个初始序号 seq = y（随机）。请注意，这个报文段也</span><strong><span>不能携带数据</span></strong><span>，但同样要消耗掉一个序号。这时 TCP 服务端进程进入 SYN-RCVD（同步收到）状态。</span><strong><span>服务器端为该TCP连接分配缓存和变量</span></strong></li><li><span>第三次握手：TCP 客户进程收到 B 的确认后，还要向 B 给出确认。确认报文段的 ACK 置 1，确认号 ack = y + 1，而自己的序号 seq = x + 1。这时 ACK 报文段</span><strong><span>可以携带数据</span></strong><span>。但如果不携带数据则不消耗序号，这种情况下，下一个数据报文段的序号仍是 seq = x + 1。这时，TCP 连接已经建立，A 进入 ESTABLISHED（已建立连接）状态。</span><strong><span>客户端为该TCP连接分配缓存和变量</span></strong></li></ul><p>&nbsp;</p><h4 id='2为什么两次握手不可以呢'><span>2.为什么两次握手不可以呢</span></h4><p><span>为了防止已经失效的连接请求报文段突然又传送到了 B，因而产生错误。比如下面这种情况：A 发出的第一个连接请求报文段并没有丢失，而是在网路结点长时间滞留了，以致于延误到连接释放以后的某个时间段才到达 B。本来这是一个早已失效的报文段。但是 B 收到此失效的链接请求报文段后，就误认为 A 又发出一次新的连接请求。于是就向 A 发出确认报文段，同意建立连接。</span></p><p><span>对于上面这种情况，如果不进行第三次握手，B 发出确认后就认为新的运输连接已经建立了，并一直等待 A 发来数据。B 的许多资源就这样白白浪费了。</span></p><p><span>如果采用了三次握手，由于 A 实际上并没有发出建立连接请求，所以不会理睬 B 的确认，也不会向 B 发送数据。B 由于收不到确认，就知道 A 并没有要求建立连接。</span></p><p>&nbsp;</p><h4 id='3为什么不需要四次握手'><span>3.为什么不需要四次握手</span></h4><p><span>我们需要明白一点，完全可靠的通信协议是不存在的。在经过三次握手之后，客户端和服务端已经可以确认之前的通信状况，都收到了确认信息。所以即便再增加握手次数也不能保证后面的通信完全可靠，所以是没有必要的。</span></p><p>&nbsp;</p><h4 id='4server-端收到-client-端的-syn-后为什么还要传回-syn'><span>4.Server 端收到 Client 端的 SYN 后，为什么还要传回 SYN？</span></h4><p><span>接收端传回发送端所发送的 SYN 是为了告诉发送端，我接收到的信息确实就是你所发送的信号了。</span></p><p><span>SYN 是 TCP / IP 建立连接时使用的握手信号。在客户机和服务器之间建立正常的 TCP 网络连接时，客户机首先发出一个 SYN 消息，服务器使用 SYN-ACK 应答表示接收到了这个消息，最后客户机再以 ACK(Acknowledgement[汉译：确认字符，                                 在数据通信传输中，接收站发给发送站的一种传输控制字符。它表示确认发来的数据已经接受无误]）消息响应。这样在客户机和服务器之间才能建立起可靠的 TCP 连接，数据才可以在客户机和服务器之间传递。</span></p><p>&nbsp;</p><h4 id='5传了-syn为什么还要传-ack'><span>5.传了 SYN，为什么还要传 ACK？</span></h4><p><span>双方通信无误必须是两者互相发送信息都无误。传了 SYN，证明发送方到接收方的通道没有问题，但是接收方到发送方的通道还需要 ACK 信号来进行验证。</span></p><p>&nbsp;</p><h3 id='4四次挥手'><span>4.四次挥手</span></h3><p><img src="计算机网络.assets/image-20210516154039195.png" alt="image-20210516154039195" style="zoom:80%;" /><span> </span></p><ul><li><span>第一次挥手：A 的应用进程先向其 TCP 发出连接释放报文段，并停止再发送数据，主动关闭 TCP 连接。A 把连接释放报文段首部的终止控制位 FIN 置 1，其序号 seq = u（等于前面已传送过的数据的最后一个字节的序号加 1），这时 A 进入 FIN-WAIT-1（终止等待1）状态，等待 B 的确认。请注意：TCP 规定，FIN 报文段即使不携带数据，也将消耗掉一个序号。</span></li><li><span>第二次挥手：B 收到连接释放报文段后立即发出确认，确认号是 ack = u + 1，而这个报文段自己的序号是 v（等于 B 前面已经传送过的数据的最后一个字节的序号加1），然后 B 就进入 CLOSE-WAIT（关闭等待）状态。TCP 服务端进程这时应通知高层应用进程，因而从 A 到 B 这个方向的连接就释放了，这时的 TCP 连接处于半关闭（half-close）状态，即 A 已经没有数据要发送了，但 B 若发送数据，A 仍要接收。也就是说，从 B 到 A 这个方向的连接并未关闭，这个状态可能会持续一段时间。A 收到来自 B 的确认后，就进入 FIN-WAIT-2(终止等待2)状态，等待 B 发出的连接释放报文段。</span></li><li><span>第三次挥手：若 B 已经没有要向 A 发送的数据，其应用进程就通知 TCP 释放连接。这时 B 发出的连接释放报文段必须使 FIN = 1。假定 B 的序号为 w（在半关闭状态，B 可能又发送了一些数据）。B 还必须重复上次已发送过的确认号 ack = u + 1。这时 B 就进入 LAST-ACK(最后确认)状态，等待 A 的确认。</span></li><li><span>第四次挥手：A 在收到 B 的连接释放报文后，必须对此发出确认。在确认报文段中把 ACK 置 1，确认号 ack = w + 1，而自己的序号 seq = u + 1（前面发送的 FIN 报文段要消耗一个序号）。然后进入 TIME-WAIT(时间等待) 状态。请注意，现在 TCP 连接还没有释放掉。必须经过时间等待计时器设置的时间 2MSL（MSL：最长报文段寿命）后，A 才能进入到 CLOSED 状态，然后撤销传输控制块，结束这次 TCP 连接。当然如果 B 一收到 A 的确认就进入 CLOSED 状态，然后撤销传输控制块。所以在释放连接时，B 结束 TCP 连接的时间要早于 A。</span></li></ul><p>&nbsp;</p><h4 id='1为什么-time-wait-状态必须等待-2msl-的时间呢'><span>1.为什么 TIME-WAIT 状态必须等待 2MSL 的时间呢？</span></h4><ol start='' ><li><span>为了保证 A 发送的最后一个 ACK 报文段能够到达 B。这个 ACK 报文段有可能丢失，因而使处在 LAST-ACK 状态的 B 收不到对已发送的 FIN + ACK 报文段的确认。B 会超时重传这个 FIN+ACK 报文段，而 A 就能在 2MSL 时间内（超时 + 1MSL 传输）收到这个重传的 FIN+ACK 报文段。接着 A 重传一次确认，重新启动 2MSL 计时器。最后，A 和 B 都正常进入到 CLOSED 状态。如果 A 在 TIME-WAIT 状态不等待一段时间，而是在发送完 ACK 报文段后立即释放连接，那么就无法收到 B 重传的 FIN + ACK 报文段，因而也不会再发送一次确认报文段，这样，B 就无法按照正常步骤进入 CLOSED 状态。</span></li><li><span>防止已失效的连接请求报文段出现在本连接中。A 在发送完最后一个 ACK 报文段后，再经过时间 2MSL，就可以使本连接持续的时间内所产生的所有报文段都从网络中消失。这样就可以使下一个连接中不会出现这种旧的连接请求报文段。</span></li></ol><p>&nbsp;</p><h4 id='2为什么第二次跟第三次不能合并-第二次和第三次之间的等待是什么'><span>2.为什么第二次跟第三次不能合并, 第二次和第三次之间的等待是什么?</span></h4><p><span>当服务器执行第二次挥手之后, 此时证明客户端不会再向服务端请求任何数据, 但是服务端可能还正在给客户端发送数据（可能是客户端上一次请求的资源还没有发送完毕），所以此时服务端会等待把之前未传输完的数据传输完毕之后再发送关闭请求。</span></p><p>&nbsp;</p><h3 id='5保活计时器的作用'><span>5.保活计时器的作用？</span></h3><p><span>除时间等待计时器外，TCP 还有一个保活计时器（keepalive timer）。设想这样的场景：客户已主动与服务器建立了 TCP 连接。但后来客户端的主机突然发生故障。显然，服务器以后就不能再收到客户端发来的数据。因此，应当有措施使服务器不要再白白等待下去。这就需要使用保活计时器了。</span></p><p><span>服务器每收到一次客户的数据，就重新设置保活计时器，时间的设置通常是两个小时。若两个小时都没有收到客户端的数据，服务端就发送一个探测报文段，以后则每隔 75 秒钟发送一次。若连续发送 10个 探测报文段后仍然无客户端的响应，服务端就认为客户端出了故障，接着就关闭这个连接。</span></p><p>&nbsp;</p><h3 id='6tcp-协议是如何保证可靠传输的'><span>6.TCP 协议是如何保证可靠传输的？</span></h3><ol start='' ><li><p><span>数据包校验：目的是检测数据在传输过程中的任何变化，若校验出包有错，则丢弃报文段并且不给出响应，这时 TCP 发送数据端超时后会重发数据；</span></p></li><li><p><span>对失序数据包重排序：既然 TCP 报文段作为 IP 数据报来传输，而 IP 数据报的到达可能会失序，因此 TCP 报文段的到达也可能会失序。TCP 将对失序数据进行重新排序，然后才交给应用层；</span></p></li><li><p><span>丢弃重复数据：对于重复数据，能够丢弃重复数据；</span></p></li><li><p><span>应答机制：当 TCP 收到发自 TCP 连接另一端的数据，它将发送一个确认。这个确认不是立即发送，通常将推迟几分之一秒；</span></p></li><li><p><span>超时重发：当 TCP 发出一个段后，它启动一个定时器，等待目的端确认收到这个报文段。如果不能及时收到一个确认，将重发这个报文段；</span></p><p><span>冗余ACK：是否丢失</span></p></li><li><p><span>流量控制：TCP 连接的每一方都有固定大小的缓冲空间。TCP 的接收端只允许另一端发送接收端缓冲区所能接纳的数据，这可以防止较快主机致使较慢主机的缓冲区溢出，这就是流量控制。TCP 使用的流量控制协议是可变大小的滑动窗口协议。</span></p></li></ol><p>&nbsp;</p><h3 id='7tcp流量控制'><span>7.TCP流量控制</span></h3><p><span>TCP 利用滑动窗口实现流量控制。</span></p><p><span>流量控制是为了控制发送方发送速率，保证接收方来得及接收。</span></p><p><span>接收方发送的确认报文中的窗口字段可以用来控制发送方窗口大小，从而影响发送方的发送速率。</span></p><p><img src="计算机网络.assets/image-20210815174735214.png" referrerpolicy="no-referrer" alt="image-20210815174735214"><span> </span></p><p><span>将窗口字段设置为 0，则发送方不能发送数据。</span></p><p>&nbsp;</p><h3 id='8拥塞控制'><span>8.拥塞控制</span></h3><p><span>在某段时间，若对网络中某一资源的需求超过了该资源所能提供的可用部分，网络的性能就要变坏。这种情况就叫拥塞。</span></p><p><span>拥塞控制就是为了防止过多的数据注入到网络中，这样就可以使网络中的路由器或链路不致于过载。</span></p><p><span>拥塞控制和流量控制不同，前者是一个全局性的过程，而后者指点对点通信量的控制。</span></p><p>&nbsp;</p><p><span>为了进行拥塞控制，TCP 发送方要维持一个拥塞窗口(cwnd) 的状态变量。拥塞控制窗口的大小取决于网络的拥塞程度，并且动态变化。发送方让自己的发送窗口取为拥塞窗口和接收方的接受窗口中较小的一个。</span></p><p><img src="计算机网络.assets/image-20210815175442622.png" referrerpolicy="no-referrer" alt="image-20210815175442622"><span> </span></p><p>&nbsp;</p><p><span>拥塞控制四种算法</span></p><p><img src="计算机网络.assets/image-20210815175744221.png" referrerpolicy="no-referrer" alt="image-20210815175744221"><span> </span></p><ul><li><p><span>慢开始</span></p><p><span>慢开始算法的思路是当主机开始发送数据时，如果立即把大量数据字节注入到网络，那么可能会引起网络阻塞，因为现在还不知道网络的符合情况。经验表明，较好的方法是先探测一下，即由小到大逐渐增大发送窗口，也就是由小到大逐渐增大拥塞窗口数值。cwnd 初始值为 1，每经过一个传播轮次，cwnd 加倍。</span></p></li><li><p><span>拥塞避免</span></p><p><span>拥塞避免算法的思路是让拥塞窗口 cwnd 缓慢增大，即每经过一个往返时间 RTT 就把发送方的 cwnd 加 1。</span></p></li></ul><p><img src="计算机网络.assets/image-20210815180412589.png" referrerpolicy="no-referrer" alt="image-20210815180412589"><span> </span></p><p><span>快速重传和快恢复（fast retransmit and recovery，FRR）是一种拥塞控制算法，它能快速恢复丢失的数据包。</span></p><p><span>没有 FRR，如果数据包丢失了，TCP 将会使用定时器来要求传输暂停。在暂停的这段时间内，没有新的或复制的数据包被发送</span></p><ul><li><p><span>快重传</span></p><p><span>如果发送机接收到三个重复确认（冗余ACK），它会假定确认件指出的数据段丢失了，并立即重传这些丢失的数据段。</span></p></li><li><p><span>快恢复</span></p><p><span>cwnd不会降至1，而是只降到临界值</span></p></li></ul><p>&nbsp;</p><p>&nbsp;</p><h2 id='2udp-用户数据报协议'><span>2.UDP 用户数据报协议</span></h2><h3 id='1主要特点-2'><span>1.主要特点</span></h3><ol start='' ><li><p><span>UDP 是无连接的；</span></p></li><li><p><span>UDP 使用尽最大努力交付，即不保证可靠交付，因此主机不需要维持复杂的链接状态</span></p></li><li><p><span>UDP 是面向报文的，适合一次性传输少量数据的网络应用</span></p><p><img src="计算机网络.assets/image-20210815170059765.png" alt="image-20210815170059765" style="zoom:80%;" /><span> </span></p><p><span>如果过大，网络层会分组，影响效率</span></p></li><li><p><span>UDP 没有拥塞控制，因此网络出现拥塞不会使源主机的发送速率降低（对实时应用很有用，如 直播，实时视频会议等）</span></p></li><li><p><span>UDP 支持一对一、一对多、多对一和多对多的交互通信</span></p></li><li><p><span>UDP 的首部开销小，只有 8 个字节，比 TCP 的 20 个字节的首部要短</span></p></li></ol><p>&nbsp;</p><h3 id='2首部格式'><span>2.首部格式</span></h3><p><img src="计算机网络.assets/image-20210815170530639.png" alt="image-20210815170530639" style="zoom:80%;" /><span> </span></p><p>&nbsp;</p><p>&nbsp;</p><h2 id='tcp-udp区别'><span>TCP 、UDP区别</span></h2><p><img src="计算机网络.assets/image-20210513003231980.png" alt="image-20210513003231980"  /><span> </span></p><p><span>TCP 提供面向连接的服务。在传送数据之前必须先建立连接，数据传送结束后要释放连接。TCP 不提供广播或多播服务。由于 TCP 要提供可靠的，面向连接的运输服务（TCP 的可靠体现在 TCP 在传递数据之前，会有三次握手来建立连接，而且在数据传递时，有确认、窗口、重传、拥塞控制机制，在数据传完后，还会断开连接用来节约系统资源），这难以避免增加了许多开销，如确认，流量控制，计时器以及连接管理等。这不仅使协议数据单元的首部增大很多，还要占用许多处理机资源。</span></p><p><span>UDP 在传送数据之前不需要先建立连接，远地主机在收到 UDP 报文后，不需要给出任何确认。虽然 UDP 不提供可靠交付，但在某些情况下 UDP 确是一种最有效的工作方式（一般用于即时通信），比如：QQ 语音、 QQ 视频 、直播等等。</span></p><p>&nbsp;</p><p><span> </span></p><p>&nbsp;</p><h1 id='网络层'><span>网络层</span></h1><p><span>任务：把分组从源端传导目的端，为分组交换网上的不同主机提供通信服务</span></p><p><span>数据报和分组</span></p><p><span>网络层的传输单位是数据报</span></p><p><span>分组是数据报切割的片段</span></p><p><img src="计算机网络.assets/image-20210815100651166.png" referrerpolicy="no-referrer" alt="image-20210815100651166"><span> </span></p><p>&nbsp;</p><p><span>路由协议</span></p><p><img src="计算机网络.assets/image-20210815103047359.png" referrerpolicy="no-referrer" alt="image-20210815103047359"><span> </span></p><p><img src="计算机网络.assets/image-20210815103144778.png" referrerpolicy="no-referrer" alt="image-20210815103144778"><span>  </span><img src="计算机网络.assets/image-20210815103157647.png" referrerpolicy="no-referrer" alt="image-20210815103157647"></p><p>&nbsp;</p><h2 id='rip协议'><span>RIP协议</span></h2><p><span>基于</span><strong><span>距离向量算法</span></strong><span>的路由选择协议</span></p><p><span>RIP协议要求网络中每一个路由器都维护从它自己到其他每一个目的网络的唯一最佳距离记录</span></p><p><img src="计算机网络.assets/image-20210815103431399.png" alt="image-20210815103431399" style="zoom:80%;" /><span> </span></p><ul><li><span>仅和相邻的路由器交换信息</span></li><li><span>交换自己的路由表</span></li><li><span>每30s交换一次路由信息，然后进行更新。若超过180s没收到相邻路由器的通告，则判定邻居路由器没了，并更新自己的路由表</span></li><li><span>刚开始工作时，只知道直接相连的网络距离为1，接着每一个路由器也之和数目有限的相邻路由器交换并更新路由信息。经过若干次更新后，所有路由器最终都会知道本AS中任意一个网络的最短距离和下一跳路由器的地址，即”收敛“</span></li></ul><p><img src="计算机网络.assets/image-20210815104041608.png" referrerpolicy="no-referrer" alt="image-20210815104041608"><span> </span></p><p>&nbsp;</p><h2 id='ospf协议'><span>OSPF协议</span></h2><p><span>开放最短路径优先协议</span></p><p><span>使用</span><strong><span>分布式的链路状态算法</span></strong></p><ul><li><span>使用洪泛法向AS中所有路由器发送信息。广播</span></li><li><span>交换信息是与本路由器相邻的所有路由器的链路状态</span></li><li><span>只有当链路状态发生变化时，才洪泛发送信息</span></li></ul><p><img src="计算机网络.assets/image-20210815104531421.png" referrerpolicy="no-referrer" alt="image-20210815104531421"><span> </span></p><p><img src="计算机网络.assets/image-20210815104558887.png" referrerpolicy="no-referrer" alt="image-20210815104558887"><span> </span></p><p>&nbsp;</p><h2 id='bgp协议'><span>BGP协议</span></h2><p><img src="计算机网络.assets/image-20210815104718456.png" referrerpolicy="no-referrer" alt="image-20210815104718456"><span> </span></p><p>&nbsp;</p><p>&nbsp;</p><h2 id='ip协议'><span>IP协议</span></h2><p><strong><span>网际协议</span></strong><span> </span><strong><em><span>Internet Protocol</span></em></strong></p><p><img src="计算机网络.assets/image-20210815104828007.png" referrerpolicy="no-referrer" alt="image-20210815104828007"><span> </span></p><h3 id='1ip数据报'><span>1.IP数据报</span></h3><p><span>加首部</span></p><p><img src="计算机网络.assets/image-20210815104932562.png" alt="image-20210815104932562" style="zoom:67%;" /><span> </span></p><p><img src="计算机网络.assets/image-20210815105423535.png" referrerpolicy="no-referrer" alt="image-20210815105423535"><span> </span></p><p>&nbsp;</p><h3 id='2ip数据报分片'><span>2.IP数据报分片</span></h3><p><span>链路层数据帧的可封装数据上限：最大传送单元MTU</span></p><p><img src="计算机网络.assets/image-20210815105514780.png" referrerpolicy="no-referrer" alt="image-20210815105514780"><span> </span></p><p><img src="计算机网络.assets/image-20210815105850524.png" referrerpolicy="no-referrer" alt="image-20210815105850524"><span> </span></p><p>&nbsp;</p><p>&nbsp;</p><h3 id='3ip地址'><span>3.IP地址</span></h3><p><span>IP地址是 IP 协议提供的一种统一的地址格式</span></p><p><span>它为互联网上的每一个网络和每一台主机分配一个逻辑地址，以此来屏蔽物理地址的差异。</span></p><p><span>IPV4：全球唯一的32位/4字节标识符</span></p><p><span>【网络号】【主机号】</span></p><p><span>IP 地址空间划分为 A、B、C、D、E 五类</span></p><p><span>A、B、C 是基本类，D、E 类作为多播和保留使用，为特殊地址。</span></p><ul><li><p><span>A类  0 开头  </span></p><p><span>第一个字节：0 ~ 127 ，1字节网络地址，3字节主机地址</span></p><p><span>默认掩码：255.0.0.0</span></p></li><li><p><span>B类  10 开头 </span></p><p><span>第一个字节：128 ~ 191，2字节网络地址，2字节主机地址</span></p><p><span>默认掩码：255.255.0.0</span></p></li><li><p><span>C类  110开头  </span></p><p><span>第一个字节：192 ~ 223，3字节网络地址，1字节主机地址</span></p><p><span>默认掩码：255.255.255.0</span></p></li><li><p><span>D类  1110开头  第一个字节：224 ~ 239</span></p><p><span>多播地址</span></p></li><li><p><span>E类  1111开头</span></p><p><span>保留以后使用</span></p></li></ul><p><img src="计算机网络.assets/image-20210815143803207.png" referrerpolicy="no-referrer" alt="image-20210815143803207"><span> </span></p><p><span>每个网络中</span></p><p><span>主机ID全0：网络号</span></p><p><span>主机ID全1：广播地址。这两个地址不能分配</span></p><p><span>127.任意数：用于本地换回测试，环回地址</span></p><p>&nbsp;</p><h3 id='4网络地址转换nat'><span>4.网络地址转换NAT</span></h3><p><span>路由器对目的地址是私有IP地址的数据报一律不转发</span></p><p><span>NAT路由器，至少有一个有效的外部全球IP地址</span></p><p><img src="计算机网络.assets/image-20210815144359251.png" alt="image-20210815144359251" style="zoom:67%;" /><span>  </span></p><p>&nbsp;</p><h3 id='5ip数据报的传输方式'><span>5.IP数据报的传输方式</span></h3><p><img src="计算机网络.assets/image-20210815163021851.png" alt="image-20210815163021851" style="zoom: 80%;" /><span> </span></p><p><img src="计算机网络.assets/image-20210815163523137.png" alt="image-20210815163523137" style="zoom:80%;" /><span>  </span></p><p>&nbsp;</p><h3 id='6移动ip'><span>6.移动IP</span></h3><p><img src="计算机网络.assets/image-20210815164138003.png" referrerpolicy="no-referrer" alt="image-20210815164138003"><span> </span></p><p><img src="计算机网络.assets/image-20210815164326401.png" referrerpolicy="no-referrer" alt="image-20210815164326401"><span> </span></p><p>&nbsp;</p><h2 id='网络层设备'><span>网络层设备</span></h2><p><span>路由器</span></p><p><img src="计算机网络.assets/image-20210815164545714.png" referrerpolicy="no-referrer" alt="image-20210815164545714"><span> </span></p><p><img src="计算机网络.assets/image-20210815164604596.png" alt="image-20210815164604596" style="zoom: 80%;" /><span> </span></p><p><img src="计算机网络.assets/image-20210815164642152.png" alt="image-20210815164642152" style="zoom:80%;" /><span> </span></p><p><img src="计算机网络.assets/image-20210815164824199.png" alt="image-20210815164824199" style="zoom:80%;" /><span> </span></p><p>&nbsp;</p><h2 id='arp协议'><span>ARP协议 </span></h2><p><strong><span>地址转换协议</span></strong><span> </span><strong><em><span>Address Resolution Protocol</span></em></strong></p><p><span>网络层的 ARP 协议完成了 </span><strong><span>IP 地址与物理地址（MAC地址）的映射</span></strong><span>。</span></p><p>&nbsp;</p><p><span>交换机没有IP地址，只有MAC地址</span></p><p><img src="计算机网络.assets/image-20210815150739133.png" referrerpolicy="no-referrer" alt="image-20210815150739133"><span> </span></p><p>&nbsp;</p><h3 id='arp协议的工作原理'><span>ARP协议的工作原理</span></h3><p><span>首先，每台主机都会在自己的 ARP 缓冲区中建立一个 ARP 列表，以表示 IP 地址和 MAC 地址的对应关系。当源主机需要将一个数据包要发送到目的主机时，会首先检查自己 ARP 列表中是否存在该 IP 地址对应的 MAC 地址：如果有，就直接将数据包发送到这个 MAC 地址；如果没有，就向本地网段发起一个 ARP 请求的广播包，查询此目的主机对应的 MAC 地址。</span></p><p><img src="计算机网络.assets/image-20210815150142663.png" alt="image-20210815150142663" style="zoom:80%;" /><span> </span></p><p><span>此 ARP 请求数据包里包括源主机的 IP 地址、硬件地址、以及目的主机的 IP 地址。</span></p><p><span>网络中所有的主机收到这个 ARP 请求后，会检查数据包中的目的 IP 是否和自己的 IP 地址一致。如果不相同就忽略此数据包；如果相同，该主机首先将发送端的 MAC 地址和 IP 地址添加到自己的 ARP 列表中，如果 ARP 表中已经存在该 IP 的信息，则将其覆盖，然后给源主机发送一个 ARP 响应数据包，告诉对方自己是它需要查找的 MAC 地址；</span></p><p><span>源主机收到这个 ARP 响应数据包后，将得到的目的主机的 IP 地址和 MAC 地址添加到自己的 ARP 列表中，并利用此信息开始数据的传输。如果源主机一直没有收到 ARP 响应数据包，表示 ARP 查询失败。</span></p><p><img src="计算机网络.assets/image-20210815150847195.png" referrerpolicy="no-referrer" alt="image-20210815150847195"><span>   </span></p><p>&nbsp;</p><h2 id='icmp协议'><span>ICMP协议</span></h2><p><img src="计算机网络.assets/image-20210815151740288.png" alt="image-20210815151740288" style="zoom: 80%;" /><span> </span></p><p><img src="计算机网络.assets/image-20210815151908313.png" alt="image-20210815151908313" style="zoom:80%;" /><span> </span></p><p>&nbsp;</p><h2 id='ipv6'><span>IPV6</span></h2><p><span>从根本上解决IPV4地址耗尽问题</span></p><p><span>改进首部格式</span></p><p><span>快速处理/转发数据报</span></p><p><span>支持QoS（服务质量）</span></p><h3 id='ipv6数据报格式'><span>IPV6数据报格式</span></h3><p><img src="计算机网络.assets/image-20210815152342120.png" referrerpolicy="no-referrer"><span> </span></p><p><span> </span><img src="计算机网络.assets/image-20210815161843866.png" alt="image-20210815161843866" style="zoom: 80%;" /><span>  </span></p><p><span>IPV6与IPV4的区别</span></p><ul><li><span>IPV6将地址从32位（4B）扩大到128位（16B）</span></li><li><span>IPV6将IPV4的校验和字段移除，以减少每跳的处理时间</span></li><li><span>IPV6将IPV4的可选字段移出首部，变成扩展首部，提高了路由器的处理效率</span></li><li><span>IPV6支持即插即用，不需要DHCP协议</span></li><li><span>IPV6首部长度必须是8B的整数倍，IPV4首部是4B的整数倍</span></li><li><span>IPV6只能在主机处分片，IPV4可以在主机和路由器处分片</span></li></ul><p>&nbsp;</p><p>&nbsp;</p><h1 id='数据链路层'><span>数据链路层</span></h1><p><span>结点：主机、路由器</span></p><p><span>链路：网络中两个结点之间的物理通道</span></p><p><span>逻辑链路</span></p><p><span>帧：协议数据单元，封装网络层数据报</span></p><p>&nbsp;</p><p><strong><span>数据链路层负责将数据报通过链路从一个结点传送到另一个物理链路直接相连的相邻结点</span></strong></p><p>&nbsp;</p><p><span>功能：</span></p><p><span>1.为网络层提供服务</span></p><ul><li><span>无确认无连接服务</span></li><li><span>有确认无连接服务</span></li><li><span>有确认面向连接服务（有连接一定有确认）</span></li></ul><p><span>2.链路管理，连接的建立、维持、释放（用于面向连接的服务）</span></p><p><span>3.组帧 </span></p><p><span>4.流量控制</span></p><p><span>5.差错控制</span></p><p>&nbsp;</p><h2 id='组帧'><span>组帧</span></h2><p><span>【帧首部】 IP数据报 【帧尾部】</span></p><p><span>				</span><span>【--------------】 ：&lt;=最大传送单元MTU</span></p><p><span>【---------------------------------------】：数据链路层的帧长</span></p><p><span>首部和尾部具有很多控制信息</span></p><p><span>组帧、帧同步：帧定界符（确定帧的界限）</span></p><ul><li><span>字符计数法</span></li><li><span>字符填充法</span></li><li><span>零比特填充法</span></li><li><span>违规编码法</span></li></ul><p>&nbsp;</p><h2 id='差错控制'><span>差错控制</span></h2><p><span>可靠传输：发送端发什么，接收端就接收什么</span></p><ul><li><p><strong><span>检错编码</span></strong></p><ul><li><p><em><span>奇偶校验码</span></em></p><p><span>n-1位信息元，1位校验码</span></p><ul><li><span>奇校验：加上校验码后，1的个数为奇数</span></li><li><span>偶校验：加上校验码后，1的个数为偶数</span></li></ul><p><span>只能检查除奇数/偶数个比特错误，校验能力为50%</span></p></li><li><p><em><span>CRC循环冗余码</span></em></p><p><span>不是可靠传输</span></p></li></ul></li><li><p><strong><span>纠错控制</span></strong></p><ul><li><p><em><span>海明码</span></em></p><p><span>发现双比特错，纠正单比特错</span></p></li></ul></li></ul><p>&nbsp;</p><h2 id='流量控制'><span>流量控制</span></h2><p><span>数据链路层的流量控制：点到点</span></p><p><span>控制手段：接收方收不下就不恢复确认</span></p><p><span>传输层的流量控制：端到端</span></p><p><span>控制手段：接收端给发送端一个窗口公告</span></p><p>&nbsp;</p><p><span>停止-等待协议</span></p><p><span>每发送完一个帧就停止发送，等待对方的确认，在收到确认后再发送下一个帧（较低效）</span></p><p><span>发送窗口=1，接受窗口=1</span></p><p>&nbsp;</p><p><span>(大小固定)</span></p><p><span>滑动窗口协议 </span></p><p><span>后退N帧协议</span></p><p><span>发送窗口&gt;1，接受窗口=1</span></p><p><span>选择重传协议</span></p><p><span>发送窗口&gt;1，接受窗口&gt;1</span></p><p>&nbsp;</p><h2 id='停止-等待协议'><span>停止-等待协议</span></h2><p><span>超时计时器：每发送一个帧就启动一个计时器，设置的重传时间比帧传输的平均RTT更长一些</span></p><p><span>1.发完一个帧后，必须保留其副本</span></p><p><span>2.数据帧和确认帧必须编号</span></p><p>&nbsp;</p><p><span>数据帧丢失或检测到帧出错</span></p><p><span>ACK丢失</span></p><p><span>ACK迟到</span></p><p>&nbsp;</p><h2 id='后退n帧协议-gbn'><span>后退N帧协议 GBN</span></h2><p><img src="计算机网络.assets/image-20210815091449166.png" alt="image-20210815091449166"  /><span> </span></p><p><img src="计算机网络.assets/image-20210815091704798.png" alt="image-20210815091704798"  /><span> </span></p><p><img src="计算机网络.assets/image-20210815092023824.png" referrerpolicy="no-referrer" alt="image-20210815092023824"><span> </span></p><p>&nbsp;</p><p>&nbsp;</p><h2 id='选择重传协议-sr'><span>选择重传协议 SR</span></h2><p><span>只重传出错的帧</span></p><p><span>设置单个确认，同时加大接受窗口，设置接受缓存，缓存乱序到达的帧</span></p><p><img src="计算机网络.assets/image-20210815092933483.png" referrerpolicy="no-referrer" alt="image-20210815092933483"><span> </span></p><p><img src="计算机网络.assets/image-20210815093134752.png" referrerpolicy="no-referrer" alt="image-20210815093134752"><span> </span></p><p><img src="计算机网络.assets/image-20210815093218739.png" referrerpolicy="no-referrer" alt="image-20210815093218739"><span> </span></p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p></div></div>
</body>
</html>